import { j as n, c as H, d as W, s as z, a as N, n as Z, u as O, b as G, l as J, t as K, q as i, T as d, e as Q, f as X, R as Y, P as ee, h as ne, m as oe } from "./TriangleExclamation.uZuTZ4qX.js";
import { B as U } from "./Button.DWqE03xw.js";
import { c as g, u as j } from "./index.esm.FeZvylQh.js";
import { D as te, o as w, s as x, F as A, I as T, T as re } from "./Textarea.9VzdFbJ9.js";
import { N as B } from "./ProgressButton.CSi1Kb1A.js";
import { E as k } from "./Banner.BuGf3OMn.js";
import { R as E, I as ae } from "./index.C1yFBENH.js";
import { S as se } from "./Check.BrevffEk.js";
const ie = (e) => /* @__PURE__ */ n.jsxs("svg", { width: "60", height: "70", viewBox: "0 0 60 70", fill: "none", xmlns: "http://www.w3.org/2000/svg", children: [
  /* @__PURE__ */ n.jsx(
    "path",
    {
      d: "M60 52.5046V17.4954L29.9909 0L0 17.4954V52.5046L29.9909 70L60 52.5046Z",
      fill: "url(#paint0_linear_459_3707)"
    }
  ),
  /* @__PURE__ */ n.jsx(
    "path",
    {
      d: "M38.9947 49.3666C37.3957 49.409 35.8345 48.8721 34.5929 47.8531C33.9738 47.317 33.4865 46.6428 33.1696 45.8837C32.8526 45.1247 32.7146 44.3015 32.7665 43.4793C32.7058 42.6534 32.8397 41.8248 33.1572 41.0614C33.4747 40.2979 33.9667 39.6213 34.5929 39.087C35.8632 38.0859 37.4393 37.5639 39.0496 37.6107C40.8 37.57 42.5189 38.0864 43.9628 39.087V35.396C42.2967 34.435 40.401 33.9562 38.4834 34.0119H27.5245C27.5294 33.8118 27.5601 33.6134 27.6158 33.4214C27.6656 33.2393 27.7266 33.0605 27.7984 32.8861C27.8874 32.7014 27.9977 32.5279 28.1271 32.3693L28.529 31.9079C28.6827 31.7307 28.854 31.5699 29.0404 31.4281L29.6248 31.0037L30.3006 30.5977L30.9765 30.1733L31.7253 29.7119L32.4377 29.269C33.8989 28.439 35.239 27.4079 36.4194 26.2054C37.3574 25.2102 37.8806 23.8886 37.8806 22.5144C37.9271 21.7331 37.7851 20.952 37.467 20.2384C37.1489 19.5247 36.664 18.9 36.0541 18.4174C34.6063 17.3994 32.8662 16.8932 31.1043 16.9779C28.8625 16.9409 26.6613 17.5837 24.7847 18.8234V22.053C26.5351 20.7482 28.6379 20.0141 30.8121 19.9491C31.8051 19.892 32.7936 20.1224 33.6614 20.6135C33.9731 20.8079 34.2305 21.0795 34.4094 21.4024C34.5884 21.7253 34.683 22.0889 34.6842 22.459C34.6766 22.938 34.5704 23.4103 34.3723 23.8456C34.1742 24.2809 33.8885 24.6697 33.5335 24.9873C32.5549 25.7627 31.5096 26.4482 30.4102 27.0358C28.8029 28.0324 27.6888 28.7522 27.1043 29.1951C26.1479 29.9288 25.3572 30.8599 24.7847 31.9264V24.6922H21.4239L11.0312 37.6107V40.5081H21.6248V44.5314H24.7847V37.1493H31.1591C30.3421 38.0246 29.709 39.0579 29.2978 40.187C28.8866 41.3162 28.7058 42.5176 28.7664 43.7192C28.6876 45.0061 28.9017 46.294 29.3925 47.4841C29.8833 48.6743 30.6376 49.7349 31.5975 50.5845C33.4743 52.1714 35.8536 53.0231 38.3006 52.9837C40.3226 53.0274 42.3279 52.6045 44.1637 51.7471V48.0561C42.5852 48.9459 40.8019 49.3981 38.9947 49.3666ZM21.6248 37.6107H14.6842L21.6248 29.0106V37.6107Z",
      fill: "white"
    }
  ),
  /* @__PURE__ */ n.jsx("defs", { children: /* @__PURE__ */ n.jsxs(
    "linearGradient",
    {
      id: "paint0_linear_459_3707",
      x1: "6.3379",
      y1: "11.0915",
      x2: "54.1524",
      y2: "58.4131",
      gradientUnits: "userSpaceOnUse",
      children: [
        /* @__PURE__ */ n.jsx("stop", { "stop-color": "#783C8C" }),
        /* @__PURE__ */ n.jsx("stop", { offset: "0.19", "stop-color": "#6F3C8B" }),
        /* @__PURE__ */ n.jsx("stop", { offset: "0.49", "stop-color": "#583A87" }),
        /* @__PURE__ */ n.jsx("stop", { offset: "0.87", "stop-color": "#323881" }),
        /* @__PURE__ */ n.jsx("stop", { offset: "0.95", "stop-color": "#29387F" })
      ]
    }
  ) })
] }), le = {
  agreeToTermsAndConditions: !1,
  showTermsAndConditionsError: !1,
  anondCredentials: { email: "", anondToken: "" },
  waitingForAnondToken: !1,
  anondTokenRequestResult: void 0,
  platformCredentials: {
    platformUrl: "https://platform.42crunch.com",
    platformApiToken: ""
  },
  waitingForPlatformConnectionTest: !1,
  platformConnectionTestResult: void 0,
  currentFormId: "BasicSignUpForm",
  complete: !1
}, P = H({
  name: "signup",
  initialState: le,
  reducers: {
    requestAnondTokenByEmail: (e, o) => {
      e.anondCredentials.email = o.payload, e.waitingForAnondToken = !0, e.anondTokenRequestResult = void 0;
    },
    showAnondTokenResponse: (e, o) => {
      var t;
      e.waitingForAnondToken = !1, e.anondTokenRequestResult = o.payload, e.currentFormId === "AnondSignUpEmailForm" && ((t = e.anondTokenRequestResult) != null && t.success) && (e.currentFormId = "AnondSignUpTokenForm");
    },
    saveAnondEmail: (e, o) => {
      e.anondCredentials.email = o.payload, e.anondTokenRequestResult = void 0;
    },
    saveAnondToken: (e, o) => {
      e.anondCredentials.anondToken = o.payload;
    },
    resetAnondTokenRequestResult: (e, o) => {
      e.anondTokenRequestResult = void 0, e.currentFormId === "AnondSignUpTokenForm" && (e.currentFormId = "AnondSignUpEmailForm");
    },
    anondSignUpComplete: (e, o) => {
      e.complete = !0, e.anondCredentials.anondToken = o.payload.anondToken;
    },
    savePlatformCredentials: (e, o) => {
      e.platformCredentials.platformUrl = o.payload.platformUrl, e.platformCredentials.platformApiToken = o.payload.platformApiToken, e.platformConnectionTestResult = void 0;
    },
    showPlatformConnectionTestError: (e, o) => {
      e.waitingForPlatformConnectionTest = !1, e.platformConnectionTestResult = o.payload, e.complete = !1;
    },
    platformSignUpComplete: (e, o) => {
      e.platformCredentials.platformUrl = o.payload.platformUrl, e.platformCredentials.platformApiToken = o.payload.platformApiToken, e.waitingForPlatformConnectionTest = !0, e.platformConnectionTestResult = void 0, e.complete = !0;
    },
    saveAgreeToTermsAndConditions: (e, o) => {
      e.agreeToTermsAndConditions = o.payload, e.agreeToTermsAndConditions && (e.showTermsAndConditionsError = !1);
    },
    showTermsAndConditionsError: (e, o) => {
      e.showTermsAndConditionsError = o.payload;
    },
    openLink: (e, o) => {
    },
    setCurrentFormId: (e, o) => {
      e.currentFormId = o.payload;
    }
  }
}), {
  requestAnondTokenByEmail: L,
  showAnondTokenResponse: de,
  saveAnondEmail: ce,
  saveAnondToken: pe,
  resetAnondTokenRequestResult: me,
  anondSignUpComplete: I,
  showPlatformConnectionTestError: ue,
  savePlatformCredentials: he,
  platformSignUpComplete: D,
  saveAgreeToTermsAndConditions: fe,
  showTermsAndConditionsError: ge,
  openLink: M,
  setCurrentFormId: h
} = P.actions, xe = P.reducer, q = W(), f = q.startListening;
function Ce(e) {
  return z({
    requestAnondTokenByEmail: () => f({
      actionCreator: L,
      effect: async (t, r) => {
        e.postMessage({
          command: "requestAnondTokenByEmail",
          payload: t.payload
        });
      }
    }),
    openLink: () => f({
      actionCreator: M,
      effect: async (t, r) => {
        e.postMessage({
          command: "openLink",
          payload: t.payload
        });
      }
    }),
    anondSignUpComplete: () => f({
      actionCreator: I,
      effect: async (t, r) => {
        e.postMessage({
          command: "anondSignUpComplete",
          payload: t.payload
        });
      }
    }),
    platformSignUpComplete: () => f({
      actionCreator: D,
      effect: async (t, r) => {
        e.postMessage({
          command: "platformSignUpComplete",
          payload: t.payload
        });
      }
    })
  }), q;
}
const Te = {
  theme: K,
  signup: xe
}, ke = {
  changeTheme: Z,
  showPlatformConnectionTestError: ue,
  showAnondTokenResponse: de
}, je = (e, o) => N({
  reducer: Te,
  middleware: (t) => t().prepend(e.middleware).concat(J),
  preloadedState: {
    theme: o
  }
}), c = () => O(), p = G;
function we({
  label: e,
  value: o,
  description: t,
  onChange: r,
  size: a
}) {
  const l = Q.useId(), s = a === "medium" ? be : ve;
  return /* @__PURE__ */ n.jsxs(Ae, { children: [
    /* @__PURE__ */ n.jsx(
      s,
      {
        checked: o,
        onCheckedChange: (u) => {
          typeof u == "boolean" && r(u);
        },
        id: l,
        children: /* @__PURE__ */ n.jsx(ye, { children: /* @__PURE__ */ n.jsx(se, {}) })
      }
    ),
    /* @__PURE__ */ n.jsx("label", { htmlFor: l, children: e }),
    t !== void 0 && /* @__PURE__ */ n.jsx(te, { children: t })
  ] });
}
const Ae = i.div`
  display: flex;
  gap: 8px;
  align-items: center;
`, be = i(E)`
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(${d.checkboxBackground});
  border-radius: 4px;
  border-color: var(${d.checkboxBorder});
  border-width: 1px;
  border-style: solid;
`, ve = i(E)`
  width: 15px;
  height: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(${d.checkboxBackground});
  border-radius: 3px;
  border-color: var(${d.checkboxBorder});
  border-width: 1px;
  border-style: solid;
`, ye = i(ae)`
  display: flex;
  align-items: center;
  justify-content: center;
  fill: var(${d.checkboxForeground});
  width: 10px;
  height: 10px;
`, m = (e) => e;
function Fe({
  data: e,
  backToPrevForm: o
}) {
  const t = c(), {
    agreeToTermsAndConditions: r,
    showTermsAndConditionsError: a,
    anondTokenRequestResult: l,
    waitingForAnondToken: s,
    complete: u
  } = p((C) => C.signup), _ = w({
    email: x().min(1, { message: "This field has to be filled." }).email("This is not a valid email.")
  });
  return /* @__PURE__ */ n.jsx(
    A,
    {
      data: e,
      saveData: (C) => t(ce(C.email)),
      wrapFormData: m,
      unwrapFormData: m,
      schema: _,
      useFormMode: "onBlur",
      children: /* @__PURE__ */ n.jsxs(y, { children: [
        /* @__PURE__ */ n.jsx(v, { children: "Enter your email to receive the token" }),
        /* @__PURE__ */ n.jsxs(F, { children: [
          /* @__PURE__ */ n.jsx(T, { label: "Email", name: "email", disabled: u }),
          l && !l.success && /* @__PURE__ */ n.jsx(k, { message: "Unexpected error when trying to request token", children: l.message })
        ] }),
        /* @__PURE__ */ n.jsxs(S, { children: [
          /* @__PURE__ */ n.jsx(b, { disabled: u || s, backToPrevForm: o }),
          /* @__PURE__ */ n.jsx(Se, {})
        ] }),
        a && !r && /* @__PURE__ */ n.jsx(Le, { children: /* @__PURE__ */ n.jsx(k, { message: "Please accept Terms and Conditions to continue" }) }),
        /* @__PURE__ */ n.jsx(Pe, {})
      ] })
    }
  );
}
function b({
  disabled: e,
  backToPrevForm: o
}) {
  return /* @__PURE__ */ n.jsx(
    V,
    {
      disabled: e,
      onClick: (t) => {
        o(), t.preventDefault(), t.stopPropagation();
      },
      children: "Back"
    }
  );
}
function Se() {
  const e = c(), { agreeToTermsAndConditions: o, waitingForAnondToken: t, complete: r } = p(
    (s) => s.signup
  ), a = g({ name: "email" }), {
    formState: { isValid: l }
  } = j();
  return /* @__PURE__ */ n.jsx(
    B,
    {
      label: "Request token",
      disabled: r || !l,
      waiting: t,
      onClick: (s) => {
        e(o ? L(a) : ge(!0)), s.preventDefault(), s.stopPropagation();
      }
    }
  );
}
function Re({
  data: e,
  backToPrevForm: o
}) {
  const t = c(), { complete: r } = p((l) => l.signup), a = w({
    anondToken: x().min(1, { message: "This field has to be filled." })
  });
  return /* @__PURE__ */ n.jsx(
    A,
    {
      data: e,
      saveData: (l) => t(pe(l.anondToken)),
      wrapFormData: m,
      unwrapFormData: m,
      schema: a,
      useFormMode: "onChange",
      children: /* @__PURE__ */ n.jsxs(y, { children: [
        /* @__PURE__ */ n.jsx(v, { children: "The token has been sent. If you don't get the mail within a couple minutes, check your spam folder and that the address is correct." }),
        /* @__PURE__ */ n.jsx(F, { style: { height: "170px" }, children: /* @__PURE__ */ n.jsx(re, { label: "Freemium token", name: "anondToken", disabled: r }) }),
        /* @__PURE__ */ n.jsxs(S, { children: [
          /* @__PURE__ */ n.jsx(b, { disabled: r, backToPrevForm: o }),
          /* @__PURE__ */ n.jsx(Ue, {})
        ] })
      ] })
    }
  );
}
function Ue() {
  const e = c(), { anondCredentials: o, waitingForAnondToken: t, complete: r } = p(
    (s) => s.signup
  ), a = g({ name: "anondToken" }), {
    formState: { isValid: l }
  } = j();
  return /* @__PURE__ */ n.jsx(
    V,
    {
      disabled: r || !l,
      onClick: (s) => {
        e(I({ email: o.email, anondToken: a })), s.preventDefault(), s.stopPropagation();
      },
      children: "Save"
    }
  );
}
function Be({
  data: e,
  backToPrevForm: o
}) {
  const t = c(), { platformConnectionTestResult: r, complete: a } = p((s) => s.signup), l = w({
    platformUrl: x().url().startsWith("https://"),
    platformApiToken: x().regex(
      /^(ide_|api_)?[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,
      "Token is invalid"
    )
  });
  return /* @__PURE__ */ n.jsx(
    A,
    {
      data: e,
      saveData: (s) => t(he(s)),
      wrapFormData: m,
      unwrapFormData: m,
      schema: l,
      useFormMode: "onChange",
      children: /* @__PURE__ */ n.jsxs(y, { children: [
        /* @__PURE__ */ n.jsx(v, { children: "Please enter 42Crunch Platform credentials" }),
        /* @__PURE__ */ n.jsxs(F, { children: [
          /* @__PURE__ */ n.jsx(T, { label: "Platform URL", name: "platformUrl", disabled: a }),
          /* @__PURE__ */ n.jsx(T, { label: "IDE token", name: "platformApiToken", disabled: a, password: !0 }),
          r && /* @__PURE__ */ n.jsx(k, { message: "Failed to connect", children: r.error })
        ] }),
        /* @__PURE__ */ n.jsxs(S, { children: [
          /* @__PURE__ */ n.jsx(b, { disabled: a, backToPrevForm: o }),
          /* @__PURE__ */ n.jsx(Ee, {})
        ] })
      ] })
    }
  );
}
function Ee() {
  const e = c(), { waitingForPlatformConnectionTest: o, complete: t } = p((s) => s.signup), r = g({ name: "platformUrl" }), a = g({ name: "platformApiToken" }), {
    formState: { isValid: l }
  } = j();
  return /* @__PURE__ */ n.jsx(
    B,
    {
      label: "Login",
      disabled: t || !l,
      waiting: o,
      onClick: (s) => {
        e(D({ platformUrl: r, platformApiToken: a })), s.preventDefault(), s.stopPropagation();
      }
    }
  );
}
function Pe() {
  const e = c(), { agreeToTermsAndConditions: o } = p((t) => t.signup);
  return /* @__PURE__ */ n.jsx(Ie, { children: /* @__PURE__ */ n.jsx(
    we,
    {
      value: o,
      onChange: (t) => {
        e(fe(t));
      },
      label: /* @__PURE__ */ n.jsxs(n.Fragment, { children: [
        "I agree to the",
        " ",
        /* @__PURE__ */ n.jsx(
          "a",
          {
            href: "#",
            onClick: (t) => {
              t.preventDefault(), t.stopPropagation(), e(M("https://42crunch.com/websales-customer-agreement"));
            },
            children: "terms & conditions"
          }
        )
      ] }),
      size: "medium"
    }
  ) });
}
const v = i.div`
  font-weight: 700;
`, y = i.div`
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
  gap: 16px;
`, F = i.div`
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
  gap: 6px;
  max-width: 560px;
`, S = i.div`
  display: flex;
  gap: 16px;
  align-items: center;
`, Le = i.div`
  max-width: 600px;
`, Ie = i.div`
  display: flex;
  gap: 5px;
  align-items: center;
`, V = i(U)`
  &:disabled {
    opacity: 0.4;
  }
`;
function De() {
  return /* @__PURE__ */ n.jsx(qe, { children: /* @__PURE__ */ n.jsxs($e, { children: [
    /* @__PURE__ */ n.jsx(_e, { children: /* @__PURE__ */ n.jsx(ie, {}) }),
    /* @__PURE__ */ n.jsx(ze, { children: "Enjoying the API Security Audit?" }),
    /* @__PURE__ */ n.jsx(Ne, { children: "Check out API Conformance Scan once logged in to check for API contract vulnerabilities at run time." })
  ] }) });
}
function Me() {
  const e = c(), { platformCredentials: o, anondCredentials: t, currentFormId: r } = p(
    (a) => a.signup
  );
  return /* @__PURE__ */ n.jsx($, { children: /* @__PURE__ */ n.jsx(Ve, { children: /* @__PURE__ */ n.jsxs(He, { children: [
    r === "BasicSignUpForm" && /* @__PURE__ */ n.jsxs(We, { children: [
      /* @__PURE__ */ n.jsx(
        R,
        {
          onClick: (a) => {
            e(h("PlatformSignUpForm")), a.preventDefault(), a.stopPropagation();
          },
          children: "Login"
        }
      ),
      /* @__PURE__ */ n.jsx(
        R,
        {
          onClick: (a) => {
            e(h("AnondSignUpEmailForm")), a.preventDefault(), a.stopPropagation();
          },
          children: "Signup"
        }
      )
    ] }),
    r === "PlatformSignUpForm" && /* @__PURE__ */ n.jsx(
      Be,
      {
        data: o,
        backToPrevForm: () => e(h("BasicSignUpForm"))
      }
    ),
    r === "AnondSignUpEmailForm" && /* @__PURE__ */ n.jsx(
      Fe,
      {
        data: { email: t.email },
        backToPrevForm: () => e(h("BasicSignUpForm"))
      }
    ),
    r === "AnondSignUpTokenForm" && /* @__PURE__ */ n.jsx(
      Re,
      {
        data: { anondToken: t.anondToken },
        backToPrevForm: () => {
          e(me());
        }
      }
    )
  ] }) }) });
}
const $ = i.div`
  display: flex;
  align-items: center;
  width: 50%;
  background-color: var(${d.background});
`, qe = i($)`
  background-color: var(${d.computedOne});
`, Ve = i.div`
  margin-right: auto;
  margin-left: auto;
  margin-top: 50%;
  margin-bottom: auto;
  width: 430px;
`, $e = i.div`
  margin: auto;
  width: 70%;
`, _e = i.div`
  margin-bottom: 30px;
`, He = i.div`
  border-radius: 3px;
  border-color: var(${d.border});
  border-width: 2px;
  border-style: solid;
  padding: 20px;
`, We = i.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  align-items: center;
`, R = i(U)`
  width: 350px;
  margin-right: 20px;
  margin-left: 20px;
`, ze = i.p`
  padding-bottom: 50px;
  margin: 0;
  font-size: 48px;
  line-height: 60px;
  font-weight: 700;
`, Ne = i.p`
  margin: 0;
  font-size: 30px;
  line-height: 40px;
  font-weight: 600;
`;
function Ze(e, o) {
  const t = je(Ce(e), o);
  X(document.getElementById("root")).render(
    /* @__PURE__ */ n.jsx(Y.StrictMode, { children: /* @__PURE__ */ n.jsxs(ee, { store: t, children: [
      /* @__PURE__ */ n.jsx(ne, {}),
      /* @__PURE__ */ n.jsxs(Oe, { children: [
        /* @__PURE__ */ n.jsx(Me, {}),
        /* @__PURE__ */ n.jsx(De, {})
      ] })
    ] }) })
  ), window.addEventListener("message", oe(t, ke));
}
window.renderWebView = Ze;
const Oe = i.div`
  display: flex;
  position: absolute;
  height: 100%;
  width: 100%;
`;
